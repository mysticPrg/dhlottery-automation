name: Playwright Tests
on:
  schedule:
    - cron: "0 10 * * 5"
  workflow_dispatch:
    inputs:
      amount: 
        type: "choice"
        description: "복권 구매 수량"
        required: true
        options:
          - "1"
          - "2"
          - "3"
          - "4"
          - "5"
        default: "5"
jobs:
  buy-lotto:
    timeout-minutes: 5
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
    - uses: actions/setup-node@v3
      with:
        node-version: 18
    - name: Install dependencies
      run: npm install -g yarn && yarn
    - name: Install Playwright Browsers
      run: yarn playwright install --with-deps
    - name: Run
      env:
        USER_ID: ${{ secrets.ID }}
        USER_PW: ${{ secrets.PASSWORD }}
        AMOUNT: ${{ inputs.amount || '5' }}
      run: yarn ci
